Dr\+Shadow\+Stack is a software defined dynamic shadow stack implemented via Dynamo\+R\+IO. Dr\+Shadow\+Stack implements a shadow stack any binary given to it, provided the file has an E\+LF header. If the program attempts to return to a corrupted return address, Dr\+Shadow\+Stack will terminate the entire process group (which it sets up). Dr\+Shadow\+Stack can handle multi-\/threaded processes, processes that fork, processes that call any variation of exec. All of these processes will also be protected by Dr\+Shadow\+Stack.

\section*{Table of Contents}


\begin{DoxyEnumerate}
\item \href{#requirements}{\tt Requirements}
\end{DoxyEnumerate}
\begin{DoxyEnumerate}
\item \href{#installation-instructions}{\tt Installation Instructions}
\end{DoxyEnumerate}
\begin{DoxyEnumerate}
\item \href{#usage}{\tt Usage}
\end{DoxyEnumerate}
\begin{DoxyEnumerate}
\item \href{#example}{\tt Example}
\end{DoxyEnumerate}
\begin{DoxyEnumerate}
\item \href{#documentation}{\tt Documentation}
\end{DoxyEnumerate}
\begin{DoxyEnumerate}
\item \href{#developers}{\tt Developers}
\end{DoxyEnumerate}

\subsection*{Requirements}


\begin{DoxyEnumerate}
\item This project utilizes \href{https://github.com/DynamoRIO/dynamorio}{\tt Dynamo\+R\+IO}. Installation instructions may be found \href{https://github.com/DynamoRIO/dynamorio/wiki/How-To-Build}{\tt here}.
\item This project utilizes the C++ library \href{https://boost.org}{\tt Boost}. This library can be built from source, as explained \href{https://www.boost.org/doc/libs/1_66_0/more/getting_started/unix-variants.html}{\tt here}. On \href{http://releases.ubuntu.com/16.04.4/}{\tt Ubuntu 16.\+04}, this library can be installed as follows\+: 
\begin{DoxyCode}
1 sudo apt-get update && sudo apt-get install libboost-all-dev
\end{DoxyCode}

\item The project is built on \href{http://releases.ubuntu.com/16.04.4/}{\tt Ubuntu 16.\+04 L\+TS} via \href{https://cmake.org/}{\tt C\+Make}. It requires compiler that supports {\ttfamily C++11}.
\item The system architecture is in the x86 or x86\+\_\+64 families.
\end{DoxyEnumerate}

For more specific information about requirements, visit the requirements wiki page \href{https://github.com/zwimer/DrShadowStack/wiki/Requirements}{\tt here}.

\subsection*{Installation Instructions}


\begin{DoxyEnumerate}
\item Install dependencies
\item Clone the repository 
\begin{DoxyCode}
1 git clone https://github.com/zwimer/DrShadowStack
\end{DoxyCode}

\item Configure the {\ttfamily Dr\+Shadow\+Stack/src/\+C\+Make\+Lists.\+txt} file. Instructions in the file itself.
\item Create a build directory 
\begin{DoxyCode}
1 cd DrShadowStack/src
2 mkdir build && cd build
\end{DoxyCode}

\item Build with C\+Make and make 
\begin{DoxyCode}
1 cmake .. && make -j 4
\end{DoxyCode}

\end{DoxyEnumerate}

\subsection*{Usage}

The full usage of this program can be found via\+: {\ttfamily ./\+Dr\+Shadow\+Stack -\/-\/help}

In general, the usage is of this format\+: 
\begin{DoxyCode}
1 ./DrShadowStack [--ss\_mode <Mode>] <executable target> <target arguments>
\end{DoxyCode}


There are two different modes, {\ttfamily int} (internal) and {\ttfamily ext} (external). The internal mode keeps the shadow stack internally in the Dynamo\+R\+IO client. The external mode stores the stack in a separate process.

\subsection*{Example}

From the build directory of a previous version, an example could be\+: 
\begin{DoxyCode}
1 vagrant@ubuntu-xenial ~/S/s/build> ./DrShadowStack ls -la ./
2 total 612
3 drwxrwxr-x 3 vagrant vagrant   4096 Apr  3 20:01 .
4 drwxrwxr-x 4 vagrant vagrant   4096 Apr  3 19:59 ..
5 -rw-rw-r-- 1 vagrant vagrant  14536 Apr  3 19:59 CMakeCache.txt
6 drwxrwxr-x 7 vagrant vagrant   4096 Apr  3 20:01 CMakeFiles
7 -rw-rw-r-- 1 vagrant vagrant   1381 Apr  3 19:59 cmake\_install.cmake
8 -rw-rw-r-- 1 vagrant vagrant   8045 Apr  3 20:01 compile\_commands.json
9 -rwxrwxr-x 1 vagrant vagrant 402168 Apr  3 20:01 DrShadowStack
10 -rwxrwxr-x 1 vagrant vagrant  53264 Apr  3 20:00 libss\_dr\_client.so
11 -rwxrwxr-x 1 vagrant vagrant  96304 Apr  3 19:59 libss\_support.so
12 -rw-rw-r-- 1 vagrant vagrant  15265 Apr  3 20:01 Makefile
13 -rw-rw-r-- 1 vagrant vagrant   8157 Apr  3 20:01 ss\_dr\_client.ldscript
\end{DoxyCode}


\subsection*{Documentation}

Additional documentation of Dr\+Shadow\+Stack can be found in the \href{https://github.com/zwimer/DrShadowStack/wiki}{\tt wiki}.

\subsection*{Developers}

Additional documentation to each component of Dr\+Shadow\+Stack is build via \href{http://www.stack.nl/~dimitri/doxygen/}{\tt Doxygen}, and hosted \href{https://zwimer.com/DrShadowStack}{\tt here}. 