Dr\+Shadow\+Stack is a software defined dynamic shadow stack implemented via Dynamo\+R\+IO. Dr\+Shadow\+Stack implements a shadow stack for most any binary given to it. If the program attempts to return to a corrupted return address, Dr\+Shadow\+Stack will terminate the entire process group (which it sets up).

\subsection*{Requirements}

This project utilizes \href{https://github.com/DynamoRIO/dynamorio}{\tt Dynamo\+R\+IO}. Installation instructions may be found \href{https://github.com/DynamoRIO/dynamorio/wiki/How-To-Build}{\tt here}.

The project is built on \href{http://releases.ubuntu.com/16.04.4/}{\tt Ubuntu 16.\+04} via \href{https://cmake.org/}{\tt cmake}. It requires compiler that supports {\ttfamily C++11}.

\subsubsection*{Developers}

The documentation is build via \href{http://www.stack.nl/~dimitri/doxygen/}{\tt Doxygen}.

The changelog is generated via \href{https://github.com/skywinder/github-changelog-generator}{\tt github\+\_\+changelog\+\_\+generator}, which is installed via the command 
\begin{DoxyCode}
1 gem install github\_changelog\_generator
\end{DoxyCode}


\subsection*{Installation Instructions}


\begin{DoxyEnumerate}
\item Install dependencies
\item Clone the repository 
\begin{DoxyCode}
1 git clone https://github.com/zwimer/DrShadowStack
\end{DoxyCode}

\item Configure the C\+Make\+Lists.\+txt file (optional) 
\begin{DoxyCode}
1 vim DrShadowStack/src/CMakeLists.txt
\end{DoxyCode}

\item Create a build directory 
\begin{DoxyCode}
1 cd DrShadowStack/src
2 mkdir build && cd build
\end{DoxyCode}

\item Build with C\+Make and make 
\begin{DoxyCode}
1 cmake .. && make -j 4
\end{DoxyCode}

\end{DoxyEnumerate}

\subsection*{Usage}

The usage of this program is\+: {\ttfamily ./\+Dr\+Shadow\+Stack.out $<$Mode$>$ $<$drrun$>$ $<$a.\+out$>$ $<$arguments for a.\+out$>$}

There are two different modes, {\ttfamily -\/int} (internal) and {\ttfamily -\/ext} (external). The internal mode keeps the shadow stack internally in the Dynamo\+R\+IO client. The external mode stores the stack in a separate process.

\subsection*{Example}

From the build directory, an example could be\+: 
\begin{DoxyCode}
1 vagrant@ubuntu-xenial ~/S/s/build> ./DrShadowStack.out -int ~/dynamorio/build/bin64/drrun ls -la
2 TID 25134: DynamoRIO client started
3 total 468
4 drwxrwxr-x 3 vagrant vagrant   4096 Mar 31 00:25 ./
5 drwxrwxr-x 3 vagrant vagrant   4096 Mar 30 23:34 ../
6 -rw-rw-r-- 1 vagrant vagrant  11755 Mar 31 00:25 CMakeCache.txt
7 drwxrwxr-x 7 vagrant vagrant   4096 Mar 31 00:25 CMakeFiles/
8 -rw-rw-r-- 1 vagrant vagrant   1380 Mar 31 00:25 cmake\_install.cmake
9 -rwxrwxr-x 1 vagrant vagrant 100360 Mar 31 00:25 DrShadowStack.out*
10 -rwxrwxr-x 1 vagrant vagrant 215888 Mar 31 00:25 libss\_dr\_client.so*
11 -rwxrwxr-x 1 vagrant vagrant 102536 Mar 31 00:25 libss\_support.so*
12 -rw-rw-r-- 1 vagrant vagrant  15205 Mar 31 00:25 Makefile
13 -rw-rw-r-- 1 vagrant vagrant   8157 Mar 31 00:25 ss\_dr\_client.ldscript
\end{DoxyCode}


\subsection*{Documentation}

Additional documentation to each component of Dr\+Shadow\+Stack is build via \href{http://www.stack.nl/~dimitri/doxygen/}{\tt Doxygen}, and hosted \href{https://zwimer.com/DrShadowStack}{\tt here}. 