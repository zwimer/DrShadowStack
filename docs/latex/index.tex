Dr\+Shadow\+Stack is a software defined dynamic shadow stack implemented via Dynamo\+R\+IO. Dr\+Shadow\+Stack implements a shadow stack for most any binary given to it. If the program attempts to return to a corrupted return address, Dr\+Shadow\+Stack will terminate the entire process group (which it sets up).

\subsection*{Requirements}


\begin{DoxyEnumerate}
\item This project utilizes \href{https://github.com/DynamoRIO/dynamorio}{\tt Dynamo\+R\+IO}. Installation instructions may be found \href{https://github.com/DynamoRIO/dynamorio/wiki/How-To-Build}{\tt here}.
\item This project utilizes the C++ library \href{https://boost.org}{\tt Boost}. This library can be built from source, as explained \href{https://www.boost.org/doc/libs/1_66_0/more/getting_started/unix-variants.html}{\tt here}. On \href{http://releases.ubuntu.com/16.04.4/}{\tt Ubuntu 16.\+04}, this library can be installed as follows\+: 
\begin{DoxyCode}
1 sudo apt-get update && sudo apt-get install libboost-all-dev
\end{DoxyCode}

\item The project is built on \href{http://releases.ubuntu.com/16.04.4/}{\tt Ubuntu 16.\+04} via \href{https://cmake.org/}{\tt cmake}. It requires compiler that supports {\ttfamily C++11}.
\end{DoxyEnumerate}

\subsubsection*{Developers}


\begin{DoxyEnumerate}
\item The documentation is build via \href{http://www.stack.nl/~dimitri/doxygen/}{\tt Doxygen}.
\item The changelog is generated via \href{https://github.com/skywinder/github-changelog-generator}{\tt github\+\_\+changelog\+\_\+generator}, which is installed via the command 
\begin{DoxyCode}
1 gem install github\_changelog\_generator
\end{DoxyCode}

\end{DoxyEnumerate}

\subsection*{Installation Instructions}


\begin{DoxyEnumerate}
\item Install dependencies
\item Clone the repository 
\begin{DoxyCode}
1 git clone https://github.com/zwimer/DrShadowStack
\end{DoxyCode}

\item Configure the {\ttfamily Dr\+Shadow\+Stack/src/\+C\+Make\+Lists.\+txt} file. Instructions in the file itself.
\item Create a build directory 
\begin{DoxyCode}
1 cd DrShadowStack/src
2 mkdir build && cd build
\end{DoxyCode}

\item Build with C\+Make and make 
\begin{DoxyCode}
1 cmake .. && make -j 4
\end{DoxyCode}

\end{DoxyEnumerate}

\subsection*{Usage}

The full usage of this program can be found via\+: {\ttfamily ./\+Dr\+Shadow\+Stack -\/-\/help}

In general, the usage is of this format\+: 
\begin{DoxyCode}
1 ./DrShadowStack [--ss\_mode <Mode>] <executable target> <target arguments>
\end{DoxyCode}


There are two different modes, {\ttfamily int} (internal) and {\ttfamily ext} (external). The internal mode keeps the shadow stack internally in the Dynamo\+R\+IO client. The external mode stores the stack in a separate process.

\subsection*{Example}

From the build directory, an example could be\+: 
\begin{DoxyCode}
1 vagrant@ubuntu-xenial ~/S/s/build> ./DrShadowStack ls -la ./
2 TID 28866: DynamoRIO client started
3 total 748
4 drwxrwxr-x 3 vagrant vagrant   4096 Apr  1 06:43 .
5 drwxrwxr-x 3 vagrant vagrant   4096 Apr  1 06:51 ..
6 -rw-rw-r-- 1 vagrant vagrant  14518 Apr  1 03:15 CMakeCache.txt
7 drwxrwxr-x 7 vagrant vagrant   4096 Apr  1 06:45 CMakeFiles
8 -rw-rw-r-- 1 vagrant vagrant   1380 Mar 31 00:25 cmake\_install.cmake
9 -rw-rw-r-- 1 vagrant vagrant   8441 Apr  1 06:42 compile\_commands.json
10 -rwxrwxr-x 1 vagrant vagrant 365520 Apr  1 06:43 DrShadowStack
11 -rwxrwxr-x 1 vagrant vagrant 216008 Apr  1 06:42 libss\_dr\_client.so
12 -rwxrwxr-x 1 vagrant vagrant 102744 Apr  1 06:42 libss\_support.so
13 -rw-rw-r-- 1 vagrant vagrant    441 Apr  1 06:52 log
14 -rw-rw-r-- 1 vagrant vagrant  16012 Apr  1 06:42 Makefile
15 -rw-rw-r-- 1 vagrant vagrant   8157 Apr  1 06:42 ss\_dr\_client.ldscript
\end{DoxyCode}


\subsection*{Documentation}

Additional documentation to each component of Dr\+Shadow\+Stack is build via \href{http://www.stack.nl/~dimitri/doxygen/}{\tt Doxygen}, and hosted \href{https://zwimer.com/DrShadowStack}{\tt here}. 